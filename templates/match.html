<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static',filename='assets/styles/index.css') }}" type="text/css">
</head>

<body>
        <div id="line-up-container">
            <table class="line-up-text" id="home">
                    <tr>
                        {% for player in matchData[0]['lineup'] %}
                            <tr id={{loop.index}}>
                                <td onmouseover="togglePosition({{loop.index}})" onmouseleave="togglePosition({{loop.index}})">{{player['player']['name']}}</td>
                                <td onmouseover="togglePosition({{loop.index}})" onmouseleave="togglePosition({{loop.index}})">{{player['jersey_number']}}</td>
                            </tr>
                        {% endfor %}
                    </tr>
                </table>
                {{lineup}}
                <table class="line-up-text" id="away">
                    <tr>
                        {% for player in matchData[1]['lineup'] %}
                            <tr>
                                <td onmouseover="togglePosition({{loop.index + 11}})" onmouseleave="togglePosition({{loop.index + 11}})">{{player['jersey_number']}}</td>
                                <td onmouseover="togglePosition({{loop.index + 11}})" onmouseleave="togglePosition({{loop.index + 11}})">{{player['player']['name']}}</td>
                            </tr>
                        {% endfor %}
                    </tr>
                </table>
        </div>

        <div id="shots-container">
            <div class="shots-plot" id="home-plot">
                {{home_plot}}
            </div>
            <table id="shots-text">
                <tr>
                    <td id="left">{{statistics['home']['name']}}</td>
                    <td id="center">{{statistics['home']['goals']}} - {{statistics['away']['goals']}}</td>
                    <td id="right">{{statistics['away']['name']}}</td>
                </tr>
                <tr>
                    <td id="left">{{statistics['home']['xG']}}</td>
                    <td id="center">Expected goals</td>
                    <td id="right">{{statistics['away']['xG']}}</td>
                </tr>
                <tr>
                    <td id="left">{{statistics['home']['attempts']['total']}}</td>
                    <td id="center">Total attempts</td>
                    <td id="right">{{statistics['away']['attempts']['total']}}</td>
                </tr>
                <tr>
                    <td id="left" onmouseenter="toggleOnTarget({{statistics['home']['attempts']['total']}}, {{statistics['home']['attempts']['on_target']}}, 'home')", onmouseleave="toggleOnTarget({{statistics['home']['attempts']['total']}}, {{statistics['home']['attempts']['on_target']}}, 'home')">{{statistics['home']['attempts']['on_target']}}</td>
                    <td id="center" onmouseenter="toggleOnTarget({{statistics['home']['attempts']['total']}}, {{statistics['home']['attempts']['on_target']}}, 'both')", onmouseleave="toggleOnTarget({{statistics['home']['attempts']['total']}}, {{statistics['home']['attempts']['on_target']}}, 'both')">On target</td>
                    <td id="right" onmouseenter="toggleOnTarget({{statistics['away']['attempts']['total']}}, {{statistics['away']['attempts']['on_target']}}, 'away')", onmouseleave="toggleOnTarget({{statistics['away']['attempts']['total']}}, {{statistics['away']['attempts']['on_target']}}, 'away')">{{statistics['away']['attempts']['on_target']}}</td>
                </tr>
                <tr>
                    <td id="left">{{statistics['home']['attempts']['blocked']}}</td>
                    <td id="center">Blocked</td>
                    <td id="right">{{statistics['away']['attempts']['blocked']}}</td>
                </tr>
            </table>
            <div class="shots-plot" id="away-plot">
                {{away_plot}}
            </div>
        </div>

<script>
                function togglePosition(index){
                   document.getElementById("text_" + index).firstElementChild.firstElementChild.classList.toggle('highlight');
                }

                function toggleOnTarget(shots, onTarget, side){
                    if(side === 'both'){
                        toggleOnTarget({{statistics['home']['attempts']['total']}}, {{statistics['home']['attempts']['on_target']}}, 'home');
                        toggleOnTarget({{statistics['away']['attempts']['total']}}, {{statistics['away']['attempts']['on_target']}}, 'away');
                    }

                    else{
                        const plot = document.getElementById(side + '-plot');
                        for(let i = 1; i <= shots - onTarget; i++){
                           plot.querySelector("#PathCollection_" + i).classList.toggle('none');
                        }
                    }
                }
            </script>

</body>
</html>